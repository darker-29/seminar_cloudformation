AWSTemplateFormatVersion: "2010-09-09"

Description: Template generated by rain

Resources:
  CloudFrontDistribution:
    Type: AWS::CloudFront::Distribution
    Properties:
      DistributionConfig:
        Comment: !Sub ${Env} CloudFront Distribution
        Enabled: true
        DefaultRootObject: index.html
        HttpVersion: http2
        CustomErrorResponses:
          - ErrorCachingMinTTL: 0
            ErrorCode: 404
            ResponseCode: 404
            ResponsePagePath: error.html
        DefaultCacheBehavior:
          AllowedMethods:
            - GET
            - HEAD
            - POST
            - PUT
            - DELETE
          CachePolicyId: CHANGEME # Optional
          CachedMethods: # Optional
            - CHANGEME
          Compress: false # Optional
          DefaultTTL: 0 # Optional
          FieldLevelEncryptionId: CHANGEME # Optional
          ForwardedValues: # Optional
            Cookies: # Optional
              Forward: CHANGEME
              WhitelistedNames: # Optional
                - CHANGEME
            Headers: # Optional
              - CHANGEME
            QueryString: false
            QueryStringCacheKeys: # Optional
              - CHANGEME
          LambdaFunctionAssociations: # Optional
            - EventType: CHANGEME # Optional
              IncludeBody: false # Optional
              LambdaFunctionARN: CHANGEME # Optional
          MaxTTL: 0 # Optional
          MinTTL: 0 # Optional
          OriginRequestPolicyId: CHANGEME # Optional
          RealtimeLogConfigArn: CHANGEME # Optional
          SmoothStreaming: false # Optional
          TargetOriginId: CHANGEME
          TrustedKeyGroups: # Optional
            - CHANGEME
          TrustedSigners: # Optional
            - CHANGEME
          ViewerProtocolPolicy: CHANGEME
        Logging: # Optional
          Bucket: !Sub ${Env}-cloudfront-log
          IncludeCookies: false
          Prefix: !Sub ${Env}-cloudfront/
        PriceClass: PriceClass_200
        ViewerCertificate: # Optional
          CloudFrontDefaultCertificate: true
          # AcmCertificateArn: CHANGEME # Optional
          # IamCertificateId: CHANGEME # Optional
          # MinimumProtocolVersion: CHANGEME # Optional
          # SslSupportMethod: CHANGEME # Optional
      Tags:
        - Key: Name
          Value: !Sub ${Env}-distribution

  CloudFrontOriginAccessIdentity:
    Type: AWS::CloudFront::CloudFrontOriginAccessIdentity
    Properties:
      CloudFrontOriginAccessIdentityConfig:
        Comment: !Sub ${Env}-origin-access-identity


